{% extends "homescreen/layout.html" %}
{% block body %}
<center>
    <h1>Not Approved Activities</h1>
{% for activity in activities %}

<div class="card" style="width:597px">
    <div class="card-header">
        {{activity.activity_name}}  
    </div>
    <div class="card-body">
        <!-- <h5 class="card-title"> Activity name: {{ ActivityCategory.activity_description }}</h5> -->
        <p class="card-text" id = "activities">     
            <ul>
                    <label class="form-check-label" for="flexRadioDefault1"> 
                        Category: {{ activity.category.category_name }}
                    </label>
                    <br>
                    <br>
                        <label class="form-check-label" for="flexRadioDefault1"> 
                        Description: {{ activity.activity_description }}
                    </label>
                    <br>
                    <br>
                        <label class="form-check-label" for="flexRadioDefault1"> 
                        Points: {{ activity.points }}
                    </label>
                    <br>
                    <br>
                        <label class="form-check-label" for="flexRadioDefault1"> 
                        Attachment Mandatory: {% if activity.attachment_mandatory %} Needed {% else %} Not Needed {%endif%}
                    </label>
                    <br>
                    <br>
                        <label class="form-check-label" for="flexRadioDefault1"> 
                        End Date: {{ activity.end_date }}
                    </label>
                    <div class="container">
                        <div class="row">
                          {% if request.user.role == "Role.A" %}   
                          <div class="col-sm">
                            <a href = "{% url 'activities:edit_and_approve_activity' activity.id %}"><button class = "btn btn-info" type="submit" style = "width: 200px; background-color: #1C77B6">Add the Activity</button></a>
                          </div>
                          {% endif %}
                          <div class="col-sm">
                            <!-- <a href = "{% url 'activities:delete_not_approved_activity' activity.id %}"><button class = "btn btn-danger" type="submit">Delete</button></a> -->
                            <button class = "btn btn-danger mr-3" value = "{% url 'activities:delete_not_approved_activity' activity.id %}" id = "{{activity.id}}" onclick="viewModal(this.id)" style ="width: 200px;">Delete</button>

                          </div>
                        </div>
                      </div>
            </ul>
        </p>
    </div>
</div>
<br>
{% endfor %}
<br>
<!-- The Modal -->
<div id="myModal" class="modal">
  
    <!-- Modal content -->
    <div class="modal-content" style="width: 500px">
      
      <span class="close">&times;</span>
      
      <p>Are you sure you want to delete?</p>
      <br>
      <div id="container">
        <a href ="" id = "delete"><button type="button home-button" id="button1" class=" btn btn-info" style="background-color:rgb(223, 60, 60); width:200px"> Delete</button></a>
        <button type="button contact-button" id="button2" class=" btn btn-info" style="background-color:rgb(120, 124, 130); width:200px"> Cancel </button>
      </div>
    </div>
  
</div>
<script>
    function viewModal(id){
        var modal = document.getElementById("myModal");
        var deleteBtn = document.getElementById("delete");
    // Get the button that opens the modal
            var catBtn = document.getElementById(id);
            catBtn.onclick = function() {
                modal.style.display = "block";
                deleteBtn.href = catBtn.value
            }    
    // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        var cancel = document.getElementById("button2")
      cancel.onclick = function() {
    modal.style.display = "none";
      }
    // When the user clicks on the button, open the modal
    // When the user clicks on <span> (x), close the modal
    span.onclick = function() {
      modal.style.display = "none";
    }
    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    }}
</script>
</center>    
{% endblock %}